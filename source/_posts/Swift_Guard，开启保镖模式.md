title: 'Swift_Guard，开启保镖模式'
categories: Swift
date: 2015-11-27 01:11:52
tags: [iOS, Swift, Bouncer Pattern, 保镖模式]
---

### 1. guard简介
`guard`特性是在Swift 2.0后推出的，所以请使用Xcode 7.X版本来编写代码

值得提及的是，`guard`和`if..else..`有很大程度的相似性，下面我将对它们进行一些比较

1. guard语句和if..else..语句有类似的地方，都是做判断处理
2. 与if语句相同的是，guard也是基于一个表达式的布尔值去判断一段代码是否该被执行
3. 与if语句不同的是，guard只有在条件不满足的时候才会执行这段代码
4. guard语句有且仅有else语句，当条件不成立时，执行else部分；当条件成立时，执行guard后面的代码
5. guard中声明的变量或者常量，在guard下面可以使用，但不能在else分支中使用

<!--more-->
### 2. guard的使用

其实只要给出一段代码，大家都能一目了然

就以安检为例

```
func checkUp(person: [String: String!]) {
    // 检查身份证
    guard let id = person["id"] else {
        print("没有携带身份证，禁止通行")
        return
    }

    // 检查有无违禁品
    guard let package = person["package"] else {
        print("检测到违禁品，禁止通行")
        return
    }

    // 可以通行
    print("身份证号：\(id)  包裹检查：\(package) 可以通行...")
}

checkUp(["id": "****0621", "package": "something"])

```

以上的解决方案是先对每个条件逐一做检查，如果不符合条件判断就退出。这就会让人容易看出来什么条件会让这个函数退出。

我听说过这个叫**保镖模式**（*Bouncer Pattern*），这个模式十分的合理。你要在坏情况进门之前把它们挡出去。这让你每次只考虑一种情况，而不用去搞清楚如何同时将所有的条件判断安排在一起。

这就是guard语句，他的好处是：

1. 是对你所期望的条件做检查，而不是非期望值
2. 如果通过了条件判断，可选类型的变量在guard语句被调用的范围内会被自动的拆包，并且可选变量的作用域是函数内，非常方便
3. 对你所不期望的情况早做检查，使得你写的函数更易读，更易维护


希望上面这个简单的例子告诉你可以马上在你的swift代码中使用guard，从而让你的函数/方法更清楚。对我们来说评判一个新的特性很容易，只要去试一下，看看它对你来说有用没用。

从OC到swift的转变是巨大的，不仅仅是语法，还有你该怎样去看待你的代码架构。只有你主动的去改变自己的意向，每天扩展你自己的模式和方式，你才会从这个绝妙的新语言中收益。

发现了什么其他好玩的东西就告诉我，这个语法对我来说也是新的。

That's all, thank you.